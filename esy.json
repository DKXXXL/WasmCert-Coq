{
  "name": "wasm_coq",
  "version": "1.0",
  "description": "Wasm formalisation in Coq, following the AFP formalisation of Conrad Watt",
  "license": "CeCILL-B",
  "esy": {
    "buildEnv": {
      "COQBIN": "#{@opam/coq.bin}/",
      "COQLIB": "#{@opam/coq.lib}/coq/"
    },
    "buildsInSource": "_build",
    "build": "dune build @all"
  },
  "dependencies": {
    "@opam/menhir": ">=20190924",
    "@opam/dune": "*",
    "@opam/coq": "8.10.1",
    "@opam/coq-mathcomp-ssreflect": "*",
    "coq-flocq": "3.2.0",
    "coq-iris": "*"
  },
  "resolutions": {
    "@opam/coq-mathcomp-ssreflect": {
      "source": "github:math-comp/math-comp#748d716efb2f2f75946c8386e441ce1789806a39",
      "override": {
        "dependencies": {
          "@opam/coq": "8.10.1"
        },
        "buildEnv": {
          "COQBIN": "#{@opam/coq.bin}/"
        },
        "build": [
          ["make", "-C", "mathcomp", "-j", "3"],
          ["make", "-C", "mathcomp", "install"]
        ]
      }
    },
    "coq-flocq": {
      "source": "git:https://gitlab.inria.fr/flocq/flocq.git#a9be51660cd865d323b0b3bbb9faa793856ea0de",
      "version": "3.2.0",
      "override": {
        "dependencies": {
           "@opam/coq": "8.10.1"
        },
        "buildEnv": {
          "COQBIN": "#{@opam/coq.bin}"
        },
        "build": [
            ["./autogen.sh"],
            ["./configure", "--libdir=#{@opam/coq.lib}/coq/user-contrib/Flocq"],
            ["./remake", "--jobs=2"],
            ["./remake", "install"]
          ]
        }
    },
    "compcert": "github:Mbodin/CompCert#edda145045463c7fe6d9e316391b275334a51b59",
    "coq-iris": {
      "source": "git:https://gitlab.mpi-sws.org/iris/iris.git#e1f6efa017c745791718cab075d7170720b5b5b2",
      "version": "3.2.0",
      "override": {
        "dependencies": {
          "@opam/coq": "8.10.1",
          "@opam/coq-stdpp": "*"
        },
        "buildEnv": {
          "COQBIN": "#{@opam/coq.bin}"
        }
      }
    },
    "@opam/coq-stdpp": {
      "source": "git:https://gitlab.mpi-sws.org/iris/stdpp.git#0e698840c2d4fb589fb327c6a53feca50cda21cb",
      "override": {
        "dependencies": {
          "@opam/coq": "8.10.1",
          "@opam/coq-stdpp": "*"
        },
        "buildEnv": {
          "COQBIN": "#{@opam/coq.bin}"
        }
      }
    }
  }
}

